<html>
<head>
	<title>Финансовые отчеты - бонусы</title>
</head>
<body>
<pre>Точка входа: http://188.246.224.156/api/v1.1/bonuses
Пример GET-запроса: https://truegamers.pro/api/v1.1/bonuses?filter={"branch_id":[1,2]}&sort={"field": "date", "order": "ASC"}
Метод: GET / POST
Авторизация: Обязательна
Параметры:
  filter=строка         //JSON-объект с параметрами фильтрации
  Формат фильтра:
    {
      "branch_id":[1,2] //массив со списком ID филиалов (может быть пустым, если нужны данные со всех филиалов)
      "date_start":"2021-01-20 00:00:00" //дата в указанном формате. Будут выведены переводы, выполненные после указанной даты (это поле можно не указывать)
      "date_end":"2021-01-21 00:00:00" //дата в указанном формате. Будут выведены переводы, выполненные до указанной даты (это поле можно не указывать)
      "user_id":45, //ID пользователя. Будут выведены бонусы, полученные указанным пользователем (это поле можно не указывать)
      admins:[6,10,45] //ID администратора, начислившего бонус. Может быть пустым или отсутствовать. Если массив пуст, то все админы из доступных филиалов. Если отсутствует, фильтра по админам нет
    }
  type_filter=строка         //JSON-объект с параметрами по типу транзакции
  Формат фильтра:
    {
      "bonus":1, //выводить бонусы из админки
      "promo":1, //бонусы по промокодам
      "cashbck":0, //кэшбэк
      "rang":1, //бонусы за новый ранг
      "crm":0, //бонусы, начисленные из CRM
    }
  sort=строка           //JSON-массив с параметрами сортировки (пример: sort={"field":"date_end","order":"DESC"})
Поля для сортировки:
  date - по дате/времени платежа
  user_id - по ID пользователя
  money - по сумме платежа
  branch_id - по ID филиала
  admin_id - по ID сотрудника

Возможные ошибки:
  ERROR_EMPTY_FILTER - не указан фильтр
  ERROR_INVALID_BRANCH_ID - филиал не существует

В случае успеха скрипт отдает следующие данные:

{
    "result": "RESULT_SUCCESS", - флаг успеха
    "payload": {
        "bonuses": [ - список бонусов
            {
                "id": "388", - ID записи
                "date": "2021-02-07T11:17:31+03:00", - дата выполнения транзакции
                "user_id": 77, - ID пользователя
                "admin_id": 6, - id админа, начислившего бонус
                "description": "Пополнение счета бонусами через кассу", - описание транзакции
                "transaction_type": "card", - тип транзакции (cash / card / crm / online)
                "money": 100, - сумма перевода
                "reservation_id": "", - ID резервации
                "branch_id": 1, - ID филиала
                "branch": { - данные филиала
                    "id": 1, - ID филиала
                    "name": "Королёв", - название
                    "city": "Краснодар", - город
                    "ip": "95.181.143.212", - внешний IP
                    "currency": "РУБ", - валюта
                    "currency_code": "RUB", - код валюты
                    "time_zone": "+03:00", - таймзона
                    "local_ip": "192.168.97.205", - локальный IP
                    "local_port": "" - локальный порт
                },
                "user": { - данные получателя
                    "id": 5, - ID получателя
                    "username": "Commander" - логин получателя
                },
                "admin": {
                    "id": 6,
                    "username": "cooldenis"
                }
            },
            {
                "id": "389",
                "date": "2021-02-08T12:35:18+03:00",
                "user_id": 79,
                "description": "Пополнение счета бонусами через кассу",
                "transaction_type": "income",
                "money": 12,
                "reservation_id": "",
                "branch_id": 3,
                "branch": {
                    "id": 3,
                    "name": "Краснодар",
                    "city": "Королёв",
                    "ip": "85.175.73.203",
                    "currency": "РУБ",
                    "currency_code": "RUB",
                    "time_zone": "+03:00",
                    "local_ip": "192.168.31.172",
                    "local_port": ""
                },
                "user": {
                    "id": 79,
                    "username": "mister-x"
                },
                "admin": {
                    "id": 6,
                    "username": "cooldenis"
                }
            }
        ],
        "totalCount": 2
    }
}
