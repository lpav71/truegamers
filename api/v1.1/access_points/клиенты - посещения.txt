<html>
<head>
	<title>Посещения клубов клиентами</title>
</head>
<body>
<pre>Точка входа: http://188.246.224.156/api/v1.1/visits
Пример GET-запроса: https://truegamers.pro/api/v1.1/visits/?filter={"user_id":47}&sort={"field": "date_end", "order": "ASC"}
Метод: GET / POST
Авторизация: Обязательна
Параметры:
  filter=строка         //JSON-объект с ID клиента(пример: filter={"user_id":47})
  sort=строка           //JSON-массив с параметрами сортировки (пример: sort={"field":"date_end","order":"DESC"})
Поля для сортировки:
  ID - по ID записи (большими буквами)
  date_start - по дате/времени начала сеанса
  date_end - по дате/времени окончания сеанса
  duration - по продолжительности сеанса
  comp_id - по номеру компьютера в клубе
  reservation_id - по ID резервации
  money - по балансу пользователя
  bonus - по бонусному балансу пользователя

Возможные ошибки:
  ERROR_EMPTY_USER_ID - не указан ID пользователя
  ERROR_USER_DOES_NOT_EXISTS - пользователь с указанным ID не существует

В случае успеха скрипт отдает следующие данные:

{
    "result": "RESULT_SUCCESS", - флаг успеха
    "payload": {
      "visits": [ - список визитов
        {
            "id": 360, - ID записи
            "user_id": 47, - ID пользователя
            "date_start": "2021-02-05T13:53:04+03:00", - начало сеанса
            "date_end": "2021-02-05T13:59:04+03:00", - конец сеанса
            "duration": 6, - продолжительность сеанса в минутах
            "comp_id": 1, - номер компьютера в клубе
            "reservation_id": 420, - ID резервации
            "money": 0, - баланс пользователя
            "bonus": 6, - бонусный баланс пользователя
            "branch_id": 3, - ID филиала
        },
        {
            "id": 359,
            "user_id": 47,
            "date_start": "2021-02-05T13:52:30+03:00",
            "date_end": "2021-02-05T13:52:30+03:00",
            "duration": 0,
            "comp_id": 1,
            "reservation_id": 418,
            "money": 150,
            "bonus": 0,
            "branch_id": 3,
        }
      ],
      	"client":{ - данные о клиенте
              "id": 6, - ID пользователя
              "username": "Cooldenis", - логин
              "email": "1c.fast@mail.ru", - email
              "phone": "+79048954616", - телефон
              "status": "1", - статус пользователя
              "is_superhost": false, - является ли суперхостом
              "name": "Денис", - имя
              "surname": "Зайцев", - фамилия
              "birthdate": "1981-04-17 00:00:00", - дата рождения
              "reg_date": "2020-11-24 11:37:50+00:00", - дата регистрации
              "last_visit": "2020-11-24 11:37:50+00:00", - последний визит
              "game_time_minutes": 0, - сколько наиграл минут
              "rang": { - ранг пользователя
                  "id": 1, - ID ранга
                  "name": "Junior", - название ранга
                  "num": 1, - номер ранга
                  "duration": 30, - сколько осталось минут до следующего ранга
                  "progress": 50, - прогресс до следующего ранга
                  "next_id": 4, - ID следующего ранга
                  "next_num": 2, - номер следующего ранга
                  "next_name": "Soldier", - название следующего ранга
                  "next_duration": 90 - при каком значении game_time наступит следующий ранг
              },
              "balance": 0, - баланс пользователя
              "bonus_balance": 0, - бонусы пользователя
              "branches": [ - филиалы, доступные пользователю
                  {
                      "id": 3, - id филиала
                      "name": "Краснодар" - название филиала
                  }
              ]
          },
        "visitsTotal": 2 - всего записей извлечено
    }
}
